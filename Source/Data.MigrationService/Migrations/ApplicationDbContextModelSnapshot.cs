// <auto-generated />
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using VttTools.Data;

#nullable disable

namespace VttTools.Data.MigrationService.Migrations
{
    [DbContext(typeof(ApplicationDbContext))]
    partial class ApplicationDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.1")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("VttTools.Data.AI.Entities.AiModel", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ContentType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Endpoint")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<bool>("IsDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsEnabled")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("ProviderId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("ContentType");

                    b.HasIndex("ProviderId");

                    b.HasIndex("ContentType", "IsDefault");

                    b.ToTable("AiProviderModels", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.AI.Entities.PromptTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<string>("NegativePromptTemplate")
                        .HasMaxLength(2048)
                        .HasColumnType("character varying(2048)");

                    b.Property<Guid?>("ReferenceImageId")
                        .HasColumnType("uuid");

                    b.Property<string>("SystemPrompt")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<string>("UserPromptTemplate")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<string>("Version")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(16)
                        .HasColumnType("character varying(16)")
                        .HasDefaultValue("1.0-draft");

                    b.HasKey("Id");

                    b.HasIndex("Category");

                    b.HasIndex("Name");

                    b.HasIndex("ReferenceImageId");

                    b.HasIndex("Name", "Version")
                        .IsUnique();

                    b.ToTable("PromptTemplates", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.AI.Entities.Provider", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("BaseUrl")
                        .IsRequired()
                        .HasMaxLength(512)
                        .HasColumnType("character varying(512)");

                    b.Property<string>("HealthEndpoint")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<bool>("IsEnabled")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("Name")
                        .IsUnique();

                    b.ToTable("AiProviderConfigs", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.Asset", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AiPrompt")
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<string>("IngestStatus")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("None");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsPublic")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsPublished")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Kind")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("PortraitId")
                        .HasColumnType("uuid");

                    b.Property<string>("Subtype")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Tags")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<Guid>("ThumbnailId")
                        .HasColumnType("uuid");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("IngestStatus")
                        .HasDatabaseName("IX_Assets_IngestStatus");

                    b.HasIndex("OwnerId")
                        .HasDatabaseName("IX_Assets_OwnerId");

                    b.HasIndex("PortraitId");

                    b.HasIndex("ThumbnailId");

                    b.HasIndex("IsPublic", "IsPublished")
                        .HasDatabaseName("IX_Assets_IsPublic_IsPublished");

                    b.HasIndex("Kind", "Category", "Type")
                        .HasDatabaseName("IX_Assets_Taxonomy");

                    b.ToTable("Assets", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.AssetStatEntry", b =>
                {
                    b.Property<Guid>("AssetId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("GameSystemId")
                        .HasColumnType("uuid");

                    b.Property<int>("Level")
                        .HasColumnType("integer");

                    b.Property<string>("Key")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Description")
                        .HasMaxLength(2048)
                        .HasColumnType("character varying(2048)");

                    b.Property<string>("Modifiers")
                        .HasMaxLength(1024)
                        .HasColumnType("character varying(1024)");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Value")
                        .HasMaxLength(8192)
                        .HasColumnType("character varying(8192)");

                    b.HasKey("AssetId", "GameSystemId", "Level", "Key");

                    b.HasIndex("GameSystemId");

                    b.HasIndex("AssetId", "GameSystemId");

                    b.ToTable("AssetStatEntries", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.AssetToken", b =>
                {
                    b.Property<Guid>("AssetId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("TokenId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.HasKey("AssetId", "TokenId");

                    b.HasIndex("TokenId");

                    b.HasIndex("AssetId", "Index")
                        .IsUnique();

                    b.ToTable("AssetTokens", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Audit.Entities.AuditLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("EntityId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("EntityType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("Payload")
                        .HasColumnType("text");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserEmail")
                        .HasColumnType("text");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("Action");

                    b.HasIndex("EntityType");

                    b.HasIndex("Timestamp")
                        .IsDescending();

                    b.HasIndex("UserId");

                    b.HasIndex("Timestamp", "UserId")
                        .IsDescending(true, false);

                    b.ToTable("AuditLogs", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Common.Entities.GameSystem", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.Property<string>("Description")
                        .HasMaxLength(512)
                        .HasColumnType("character varying(512)");

                    b.Property<string>("IconUrl")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.HasKey("Id");

                    b.HasIndex("Code")
                        .IsUnique();

                    b.ToTable("GameSystems", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Common.Entities.Shape", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<float>("Arc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(53f);

                    b.Property<float>("Direction")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<float>("Length")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<string>("Preset")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Circle");

                    b.Property<float>("Radius")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(1f);

                    b.Property<string>("Tags")
                        .IsRequired()
                        .HasMaxLength(512)
                        .HasColumnType("character varying(512)");

                    b.Property<float>("Width")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.HasKey("Id");

                    b.ToTable("Shapes", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Common.Entities.ShapeVertex", b =>
                {
                    b.Property<Guid>("ShapeId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<double>("X")
                        .HasColumnType("double precision");

                    b.Property<double>("Y")
                        .HasColumnType("double precision");

                    b.HasKey("ShapeId", "Index");

                    b.HasIndex("ShapeId", "Index");

                    b.ToTable("ShapeVertices", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Game.Entities.GameSession", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("EncounterId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.ToTable("GameSessions", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Game.Entities.Schedule", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<TimeSpan>("Duration")
                        .HasColumnType("interval");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<DateTimeOffset>("Start")
                        .HasColumnType("timestamp with time zone");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Recurrence", "VttTools.Data.Game.Entities.Schedule.Recurrence#Recurrence", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<int>("Count")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer")
                                .HasDefaultValue(1);

                            b1.PrimitiveCollection<int[]>("Days")
                                .IsRequired()
                                .HasColumnType("integer[]");

                            b1.Property<string>("Frequency")
                                .IsRequired()
                                .ValueGeneratedOnAdd()
                                .HasColumnType("text")
                                .HasDefaultValue("Daily");

                            b1.Property<int>("Interval")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer")
                                .HasDefaultValue(1);

                            b1.Property<DateTimeOffset?>("Until")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<bool>("UseWeekdays")
                                .HasColumnType("boolean");
                        });

                    b.HasKey("Id");

                    b.ToTable("Schedule", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Game.Entities.StatBlock", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.HasKey("Id");

                    b.ToTable("StatBlocks", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.Role", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("NormalizedName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedName")
                        .IsUnique()
                        .HasDatabaseName("RoleNameIndex");

                    b.ToTable("Roles", (string)null);

                    b.HasData(
                        new
                        {
                            Id = new Guid("019639ea-c7de-7e6f-b549-baf14386ad2f"),
                            ConcurrencyStamp = "b62e16a3-1d3a-4ae3-8c30-9bc628231f7a",
                            Name = "Administrator",
                            NormalizedName = "ADMINISTRATOR"
                        },
                        new
                        {
                            Id = new Guid("019639ea-c7de-786f-9f95-b397ca9509df"),
                            ConcurrencyStamp = "11d8a8d1-3a54-4464-890f-5e8c71b46c0b",
                            Name = "User",
                            NormalizedName = "USER"
                        });
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.RoleClaim", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasColumnType("text");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("text");

                    b.Property<Guid>("RoleId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("RoleId");

                    b.ToTable("RoleClaims", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.User", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int>("AccessFailedCount")
                        .HasColumnType("integer");

                    b.Property<Guid?>("AvatarId")
                        .HasColumnType("uuid");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("text");

                    b.Property<string>("DisplayName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<bool>("EmailConfirmed")
                        .HasColumnType("boolean");

                    b.Property<bool>("LockoutEnabled")
                        .HasColumnType("boolean");

                    b.Property<DateTimeOffset?>("LockoutEnd")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("NormalizedEmail")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("NormalizedUserName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("PasswordHash")
                        .HasColumnType("text");

                    b.Property<string>("PhoneNumber")
                        .HasColumnType("text");

                    b.Property<bool>("PhoneNumberConfirmed")
                        .HasColumnType("boolean");

                    b.Property<string>("SecurityStamp")
                        .HasColumnType("text");

                    b.Property<bool>("TwoFactorEnabled")
                        .HasColumnType("boolean");

                    b.Property<int>("UnitSystem")
                        .HasColumnType("integer");

                    b.Property<string>("UserName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedEmail")
                        .HasDatabaseName("EmailIndex");

                    b.HasIndex("NormalizedUserName")
                        .IsUnique()
                        .HasDatabaseName("UserNameIndex");

                    b.ToTable("Users", (string)null);

                    b.HasData(
                        new
                        {
                            Id = new Guid("019639ea-c7de-7a01-8548-41edfccde206"),
                            AccessFailedCount = 0,
                            ConcurrencyStamp = "54c61fbd-4b9f-4a08-a6ce-c46443f8afb8",
                            DisplayName = "Master",
                            Email = "master@host.com",
                            EmailConfirmed = true,
                            LockoutEnabled = false,
                            Name = "Master",
                            NormalizedEmail = "MASTER@HOST.COM",
                            NormalizedUserName = "MASTER@HOST.COM",
                            PasswordHash = "AQAAAAIAAYagAAAAEGCIPOjKQsg/WIuLEYnhnyHOsif13MaeUlO0J2ZVkMe41HuVFCqudWtLqGMKQXNBNA==",
                            PhoneNumberConfirmed = false,
                            SecurityStamp = "QAZB7SA3GUP4I2DQCDEDORPB5Q5ICUQG",
                            TwoFactorEnabled = false,
                            UnitSystem = 0,
                            UserName = "master@host.com"
                        });
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserClaim", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasColumnType("text");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("text");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("UserClaims", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserLogin", b =>
                {
                    b.Property<string>("LoginProvider")
                        .HasColumnType("text");

                    b.Property<string>("ProviderKey")
                        .HasColumnType("text");

                    b.Property<string>("ProviderDisplayName")
                        .HasColumnType("text");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("LoginProvider", "ProviderKey");

                    b.HasIndex("UserId");

                    b.ToTable("UserLogins", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserRole", b =>
                {
                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("RoleId")
                        .HasColumnType("uuid");

                    b.HasKey("UserId", "RoleId");

                    b.HasIndex("RoleId");

                    b.ToTable("UserRoles", (string)null);

                    b.HasData(
                        new
                        {
                            UserId = new Guid("019639ea-c7de-7a01-8548-41edfccde206"),
                            RoleId = new Guid("019639ea-c7de-7e6f-b549-baf14386ad2f")
                        });
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserToken", b =>
                {
                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.Property<string>("LoginProvider")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .HasColumnType("text");

                    b.Property<string>("Value")
                        .HasColumnType("text");

                    b.HasKey("UserId", "LoginProvider", "Name");

                    b.ToTable("UserTokens", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Jobs.Entities.Job", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<TimeSpan>("EstimatedDuration")
                        .HasColumnType("interval");

                    b.Property<Guid>("OwnerId")
                        .HasMaxLength(100)
                        .HasColumnType("uuid");

                    b.Property<string>("Result")
                        .HasMaxLength(8192)
                        .HasColumnType("text");

                    b.Property<DateTime?>("StartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("Status");

                    b.HasIndex("Type");

                    b.ToTable("Jobs", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Jobs.Entities.JobItem", b =>
                {
                    b.Property<Guid>("JobId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<Guid?>("AssetId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Data")
                        .IsRequired()
                        .HasMaxLength(8192)
                        .HasColumnType("text");

                    b.Property<string>("Result")
                        .HasMaxLength(8192)
                        .HasColumnType("text");

                    b.Property<DateTime?>("StartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("JobId", "Index");

                    b.HasIndex("AssetId")
                        .HasDatabaseName("IX_JobItems_AssetId");

                    b.HasIndex("Status");

                    b.ToTable("JobItems", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Adventures.Entities.Adventure", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("BackgroundId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<bool>("IsOneShot")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPublic")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPublished")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<string>("Style")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("WorldId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("BackgroundId");

                    b.HasIndex("CampaignId");

                    b.HasIndex("WorldId");

                    b.ToTable("Adventures", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Campaigns.Entities.Campaign", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("BackgroundId")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<bool>("IsPublic")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPublished")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("WorldId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("BackgroundId");

                    b.HasIndex("WorldId");

                    b.ToTable("Campaigns", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.Encounter", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("AdventureId")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<bool>("IsPublic")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsPublished")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("AdventureId");

                    b.HasIndex("StageId");

                    b.ToTable("Encounters", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.EncounterActor", b =>
                {
                    b.Property<Guid>("EncounterId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<Guid>("AssetId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ControlledBy")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("DisplayId")
                        .HasColumnType("uuid");

                    b.Property<float>("Elevation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<bool>("IsHidden")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsLocked")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<float>("Rotation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Frame", "VttTools.Data.Library.Encounters.Entities.EncounterActor.Frame#Frame", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("Background")
                                .IsRequired()
                                .ValueGeneratedOnAdd()
                                .HasColumnType("text")
                                .HasDefaultValue("")
                                .HasColumnName("FrameBackground");

                            b1.Property<string>("BorderColor")
                                .IsRequired()
                                .ValueGeneratedOnAdd()
                                .HasColumnType("text")
                                .HasDefaultValue("white")
                                .HasColumnName("FrameBorderColor");

                            b1.Property<int>("BorderThickness")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer")
                                .HasDefaultValue(1)
                                .HasColumnName("FrameBorderThickness");

                            b1.Property<string>("Shape")
                                .IsRequired()
                                .ValueGeneratedOnAdd()
                                .HasColumnType("text")
                                .HasDefaultValue("Square")
                                .HasColumnName("FrameShape");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Position", "VttTools.Data.Library.Encounters.Entities.EncounterActor.Position#Position", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("X");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Y");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Size", "VttTools.Data.Library.Encounters.Entities.EncounterActor.Size#NamedSize", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("Height")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(1.0)
                                .HasColumnName("Height");

                            b1.Property<double>("Width")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(1.0)
                                .HasColumnName("Width");
                        });

                    b.HasKey("EncounterId", "Index");

                    b.HasIndex("AssetId");

                    b.HasIndex("DisplayId");

                    b.HasIndex("EncounterId");

                    b.ToTable("EncounterActors", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.EncounterEffect", b =>
                {
                    b.Property<Guid>("EncounterId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<Guid>("AssetId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("DisabledDisplayId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("DisplayId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("EnabledDisplayId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsHidden")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid?>("OnTriggerDisplayId")
                        .HasColumnType("uuid");

                    b.Property<float>("Rotation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<string>("State")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Enabled");

                    b.Property<Guid?>("TriggerShapeId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("TriggeredDisplayId")
                        .HasColumnType("uuid");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Position", "VttTools.Data.Library.Encounters.Entities.EncounterEffect.Position#Position", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("X");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Y");
                        });

                    b.HasKey("EncounterId", "Index");

                    b.HasIndex("AssetId");

                    b.HasIndex("DisabledDisplayId");

                    b.HasIndex("DisplayId");

                    b.HasIndex("EnabledDisplayId");

                    b.HasIndex("EncounterId");

                    b.HasIndex("OnTriggerDisplayId");

                    b.HasIndex("TriggerShapeId");

                    b.HasIndex("TriggeredDisplayId");

                    b.ToTable("EncounterEffects", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.EncounterObject", b =>
                {
                    b.Property<Guid>("EncounterId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<Guid>("AssetId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClosedDisplayId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("DestroyedDisplayId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("DisplayId")
                        .HasColumnType("uuid");

                    b.Property<float>("Elevation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<bool>("IsHidden")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsLocked")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid?>("OpenedDisplayId")
                        .HasColumnType("uuid");

                    b.Property<float>("Rotation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<string>("State")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Closed");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Position", "VttTools.Data.Library.Encounters.Entities.EncounterObject.Position#Position", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("X");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Y");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Size", "VttTools.Data.Library.Encounters.Entities.EncounterObject.Size#NamedSize", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("Height")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(1.0)
                                .HasColumnName("Height");

                            b1.Property<double>("Width")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(1.0)
                                .HasColumnName("Width");
                        });

                    b.HasKey("EncounterId", "Index");

                    b.HasIndex("AssetId");

                    b.HasIndex("ClosedDisplayId");

                    b.HasIndex("DestroyedDisplayId");

                    b.HasIndex("DisplayId");

                    b.HasIndex("EncounterId");

                    b.HasIndex("OpenedDisplayId");

                    b.ToTable("EncounterObjects", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.Stage", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AlternateBackgroundId")
                        .HasColumnType("uuid");

                    b.Property<string>("AmbientLight")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Default");

                    b.Property<Guid?>("AmbientSoundId")
                        .HasColumnType("uuid");

                    b.Property<bool>("AmbientSoundIsPlaying")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("AmbientSoundLoop")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("AmbientSoundSource")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("NotSet");

                    b.Property<float>("AmbientSoundVolume")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(1f);

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<double>("GridScale")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("double precision")
                        .HasDefaultValue(5.0)
                        .HasColumnName("GridScale");

                    b.Property<string>("GridType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("NoGrid")
                        .HasColumnName("GridType");

                    b.Property<bool>("IsPublic")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsPublished")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<Guid?>("MainBackgroundId")
                        .HasColumnType("uuid");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<bool>("UseAlternateBackground")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Weather")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Clear");

                    b.Property<float>("ZoomLevel")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(1f);

                    b.ComplexProperty(typeof(Dictionary<string, object>), "GridCellSize", "VttTools.Data.Library.Stages.Entities.Stage.GridCellSize#CellSize", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("Height")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(50.0)
                                .HasColumnName("GridCellHeight");

                            b1.Property<double>("Width")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(50.0)
                                .HasColumnName("GridCellWidth");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "GridOffset", "VttTools.Data.Library.Stages.Entities.Stage.GridOffset#Offset", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("Left")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("GridOffsetLeft");

                            b1.Property<double>("Top")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("GridOffsetTop");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Panning", "VttTools.Data.Library.Stages.Entities.Stage.Panning#Point", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("PanningX");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("PanningY");
                        });

                    b.HasKey("Id");

                    b.HasIndex("AlternateBackgroundId");

                    b.HasIndex("AmbientSoundId");

                    b.HasIndex("MainBackgroundId");

                    b.ToTable("Stages", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageElement", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<Guid>("DisplayId")
                        .HasColumnType("uuid");

                    b.Property<float>("Elevation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<float>("Opacity")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(1f);

                    b.Property<float>("Rotation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.ComplexProperty(typeof(Dictionary<string, object>), "DisplaySize", "VttTools.Data.Library.Stages.Entities.StageElement.DisplaySize#NamedSize", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("Height")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(1.0)
                                .HasColumnName("Height");

                            b1.Property<double>("Width")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(1.0)
                                .HasColumnName("Width");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Position", "VttTools.Data.Library.Stages.Entities.StageElement.Position#Position", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("X");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Y");
                        });

                    b.HasKey("StageId", "Index");

                    b.HasIndex("DisplayId");

                    b.HasIndex("StageId");

                    b.ToTable("StageElements", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageLight", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<float?>("Arc")
                        .HasColumnType("real");

                    b.Property<string>("Color")
                        .HasMaxLength(16)
                        .HasColumnType("character varying(16)");

                    b.Property<float?>("Direction")
                        .HasColumnType("real");

                    b.Property<bool>("IsOn")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<float>("Range")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(0f);

                    b.Property<string>("Type")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Natural");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Position", "VttTools.Data.Library.Stages.Entities.StageLight.Position#Point", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("X");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Y");
                        });

                    b.HasKey("StageId", "Index");

                    b.HasIndex("StageId");

                    b.ToTable("StageLights", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageRegion", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<string>("Type")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Elevation");

                    b.Property<int>("Value")
                        .HasColumnType("integer");

                    b.HasKey("StageId", "Index");

                    b.HasIndex("StageId");

                    b.ToTable("StageRegions", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageRegionVertex", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("RegionIndex")
                        .HasColumnType("integer");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<double>("X")
                        .HasColumnType("double precision");

                    b.Property<double>("Y")
                        .HasColumnType("double precision");

                    b.HasKey("StageId", "RegionIndex", "Index");

                    b.HasIndex("StageId", "RegionIndex", "Index");

                    b.ToTable("StageRegionVertices", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageSound", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<bool>("IsPlaying")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("Loop")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<Guid>("MediaId")
                        .HasColumnType("uuid");

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<float>("Radius")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(10f);

                    b.Property<float>("Volume")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("real")
                        .HasDefaultValue(1f);

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Position", "VttTools.Data.Library.Stages.Entities.StageSound.Position#Point", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("X")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("X");

                            b1.Property<double>("Y")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Y");
                        });

                    b.HasKey("StageId", "Index");

                    b.HasIndex("MediaId");

                    b.HasIndex("StageId");

                    b.ToTable("StageSounds", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageWall", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.HasKey("StageId", "Index");

                    b.HasIndex("StageId");

                    b.ToTable("StageWalls", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageWallSegment", b =>
                {
                    b.Property<Guid>("StageId")
                        .HasColumnType("uuid");

                    b.Property<int>("WallIndex")
                        .HasColumnType("integer");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<bool>("IsOpaque")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<string>("State")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Open");

                    b.Property<string>("Type")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Wall");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "EndPole", "VttTools.Data.Library.Stages.Entities.StageWallSegment.EndPole#Pole", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("H")
                                .HasColumnType("double precision")
                                .HasColumnName("EndH");

                            b1.Property<double>("X")
                                .HasColumnType("double precision")
                                .HasColumnName("EndX");

                            b1.Property<double>("Y")
                                .HasColumnType("double precision")
                                .HasColumnName("EndY");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "StartPole", "VttTools.Data.Library.Stages.Entities.StageWallSegment.StartPole#Pole", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<double>("H")
                                .HasColumnType("double precision")
                                .HasColumnName("StartH");

                            b1.Property<double>("X")
                                .HasColumnType("double precision")
                                .HasColumnName("StartX");

                            b1.Property<double>("Y")
                                .HasColumnType("double precision")
                                .HasColumnName("StartY");
                        });

                    b.HasKey("StageId", "WallIndex", "Index");

                    b.HasIndex("StageId");

                    b.ToTable("StageWallSegments", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Library.Worlds.Entities.World", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("BackgroundId")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(4096)
                        .HasColumnType("character varying(4096)");

                    b.Property<bool>("IsPublic")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPublished")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("BackgroundId");

                    b.ToTable("Worlds", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Maintenance.Entities.MaintenanceMode", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DisabledAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DisabledBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("EnabledAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("EnabledBy")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsEnabled")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("ScheduledEndTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ScheduledStartTime")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("EnabledBy");

                    b.HasIndex("IsEnabled");

                    b.HasIndex("ScheduledEndTime");

                    b.HasIndex("ScheduledStartTime");

                    b.HasIndex("IsEnabled", "ScheduledStartTime");

                    b.ToTable("MaintenanceMode", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.Media.Entities.Resource", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ContentType")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Description")
                        .HasMaxLength(1024)
                        .HasColumnType("character varying(1024)");

                    b.Property<TimeSpan>("Duration")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("interval")
                        .HasDefaultValue(new TimeSpan(0, 0, 0, 0, 0));

                    b.Property<string>("FileName")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<decimal>("FileSize")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("numeric(20,0)")
                        .HasDefaultValue(0m);

                    b.Property<string>("Name")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasDefaultValue("");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<string>("Path")
                        .IsRequired()
                        .HasMaxLength(512)
                        .HasColumnType("character varying(512)");

                    b.Property<string>("Role")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Tags")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("jsonb")
                        .HasDefaultValueSql("'[]'::jsonb");

                    b.HasKey("Id");

                    b.HasIndex("Role");

                    b.HasIndex("Tags");

                    NpgsqlIndexBuilderExtensions.HasMethod(b.HasIndex("Tags"), "gin");

                    b.HasIndex("Path", "FileName");

                    b.ToTable("Resources", (string)null);
                });

            modelBuilder.Entity("VttTools.Data.AI.Entities.AiModel", b =>
                {
                    b.HasOne("VttTools.Data.AI.Entities.Provider", "Provider")
                        .WithMany("Models")
                        .HasForeignKey("ProviderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Provider");
                });

            modelBuilder.Entity("VttTools.Data.AI.Entities.PromptTemplate", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "ReferenceImage")
                        .WithMany()
                        .HasForeignKey("ReferenceImageId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("ReferenceImage");
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.Asset", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Portrait")
                        .WithMany()
                        .HasForeignKey("PortraitId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Thumbnail")
                        .WithMany()
                        .HasForeignKey("ThumbnailId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.OwnsOne("VttTools.Common.Model.NamedSize", "Size", b1 =>
                        {
                            b1.Property<Guid>("AssetId")
                                .HasColumnType("uuid");

                            b1.Property<double>("Height")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Height");

                            b1.Property<double>("Width")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("double precision")
                                .HasDefaultValue(0.0)
                                .HasColumnName("Width");

                            b1.HasKey("AssetId");

                            b1.ToTable("Assets");

                            b1.WithOwner()
                                .HasForeignKey("AssetId");
                        });

                    b.Navigation("Portrait");

                    b.Navigation("Size")
                        .IsRequired();

                    b.Navigation("Thumbnail");
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.AssetStatEntry", b =>
                {
                    b.HasOne("VttTools.Data.Assets.Entities.Asset", "Asset")
                        .WithMany("StatBlockEntries")
                        .HasForeignKey("AssetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Common.Entities.GameSystem", "GameSystem")
                        .WithMany()
                        .HasForeignKey("GameSystemId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Asset");

                    b.Navigation("GameSystem");
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.AssetToken", b =>
                {
                    b.HasOne("VttTools.Data.Assets.Entities.Asset", "Asset")
                        .WithMany("Tokens")
                        .HasForeignKey("AssetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Token")
                        .WithMany()
                        .HasForeignKey("TokenId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Asset");

                    b.Navigation("Token");
                });

            modelBuilder.Entity("VttTools.Data.Common.Entities.ShapeVertex", b =>
                {
                    b.HasOne("VttTools.Data.Common.Entities.Shape", "Shape")
                        .WithMany("Vertices")
                        .HasForeignKey("ShapeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Shape");
                });

            modelBuilder.Entity("VttTools.Data.Game.Entities.GameSession", b =>
                {
                    b.OwnsMany("VttTools.Data.Game.Entities.Participant", "Players", b1 =>
                        {
                            b1.Property<Guid>("GameSessionId")
                                .HasColumnType("uuid");

                            b1.Property<Guid>("UserId")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("uuid");

                            b1.Property<bool>("IsRequired")
                                .HasColumnType("boolean");

                            b1.Property<int>("Type")
                                .HasColumnType("integer");

                            b1.HasKey("GameSessionId", "UserId");

                            b1.ToTable("Players", (string)null);

                            b1.WithOwner()
                                .HasForeignKey("GameSessionId");
                        });

                    b.OwnsMany("VttTools.Data.Game.Entities.GameSessionEvent", "Events", b1 =>
                        {
                            b1.Property<Guid>("GameSessionId")
                                .HasColumnType("uuid");

                            b1.Property<DateTimeOffset>("Timestamp")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<string>("Description")
                                .IsRequired()
                                .HasMaxLength(1024)
                                .HasColumnType("character varying(1024)");

                            b1.HasKey("GameSessionId", "Timestamp");

                            b1.ToTable("Events", (string)null);

                            b1.WithOwner()
                                .HasForeignKey("GameSessionId");
                        });

                    b.OwnsMany("VttTools.Data.Game.Entities.GameSessionMessage", "Messages", b1 =>
                        {
                            b1.Property<Guid>("GameSessionId")
                                .HasColumnType("uuid");

                            b1.Property<DateTimeOffset>("SentAt")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<string>("Content")
                                .IsRequired()
                                .HasMaxLength(4096)
                                .HasColumnType("character varying(4096)");

                            b1.Property<Guid>("SentBy")
                                .HasColumnType("uuid");

                            b1.PrimitiveCollection<Guid[]>("SentTo")
                                .HasColumnType("uuid[]");

                            b1.Property<int>("Type")
                                .HasColumnType("integer");

                            b1.HasKey("GameSessionId", "SentAt");

                            b1.ToTable("Messages", (string)null);

                            b1.WithOwner()
                                .HasForeignKey("GameSessionId");
                        });

                    b.Navigation("Events");

                    b.Navigation("Messages");

                    b.Navigation("Players");
                });

            modelBuilder.Entity("VttTools.Data.Game.Entities.Schedule", b =>
                {
                    b.OwnsMany("VttTools.Data.Game.Entities.Participant", "Participants", b1 =>
                        {
                            b1.Property<Guid>("ScheduleId")
                                .HasColumnType("uuid");

                            b1.Property<Guid>("UserId")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("uuid");

                            b1.Property<bool>("IsRequired")
                                .HasColumnType("boolean");

                            b1.Property<int>("Type")
                                .HasColumnType("integer");

                            b1.HasKey("ScheduleId", "UserId");

                            b1.ToTable("Participants", (string)null);

                            b1.WithOwner()
                                .HasForeignKey("ScheduleId");
                        });

                    b.Navigation("Participants");
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.RoleClaim", b =>
                {
                    b.HasOne("VttTools.Data.Identity.Entities.Role", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserClaim", b =>
                {
                    b.HasOne("VttTools.Data.Identity.Entities.User", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserLogin", b =>
                {
                    b.HasOne("VttTools.Data.Identity.Entities.User", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserRole", b =>
                {
                    b.HasOne("VttTools.Data.Identity.Entities.Role", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Identity.Entities.User", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("VttTools.Data.Identity.Entities.UserToken", b =>
                {
                    b.HasOne("VttTools.Data.Identity.Entities.User", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("VttTools.Data.Jobs.Entities.JobItem", b =>
                {
                    b.HasOne("VttTools.Data.Assets.Entities.Asset", "Asset")
                        .WithMany()
                        .HasForeignKey("AssetId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("VttTools.Data.Jobs.Entities.Job", "Job")
                        .WithMany("Items")
                        .HasForeignKey("JobId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Asset");

                    b.Navigation("Job");
                });

            modelBuilder.Entity("VttTools.Data.Library.Adventures.Entities.Adventure", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Background")
                        .WithMany()
                        .HasForeignKey("BackgroundId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("VttTools.Data.Library.Campaigns.Entities.Campaign", "Campaign")
                        .WithMany("Adventures")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Library.Worlds.Entities.World", "World")
                        .WithMany("Adventures")
                        .HasForeignKey("WorldId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Background");

                    b.Navigation("Campaign");

                    b.Navigation("World");
                });

            modelBuilder.Entity("VttTools.Data.Library.Campaigns.Entities.Campaign", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Background")
                        .WithMany()
                        .HasForeignKey("BackgroundId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("VttTools.Data.Library.Worlds.Entities.World", "World")
                        .WithMany("Campaigns")
                        .HasForeignKey("WorldId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Background");

                    b.Navigation("World");
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.Encounter", b =>
                {
                    b.HasOne("VttTools.Data.Library.Adventures.Entities.Adventure", "Adventure")
                        .WithMany("Encounters")
                        .HasForeignKey("AdventureId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Library.Stages.Entities.Stage", "Stage")
                        .WithMany()
                        .HasForeignKey("StageId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Adventure");

                    b.Navigation("Stage");
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.EncounterActor", b =>
                {
                    b.HasOne("VttTools.Data.Assets.Entities.Asset", "Asset")
                        .WithMany()
                        .HasForeignKey("AssetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Display")
                        .WithMany()
                        .HasForeignKey("DisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Library.Encounters.Entities.Encounter", "Encounter")
                        .WithMany("Actors")
                        .HasForeignKey("EncounterId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Asset");

                    b.Navigation("Display");

                    b.Navigation("Encounter");
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.EncounterEffect", b =>
                {
                    b.HasOne("VttTools.Data.Assets.Entities.Asset", "Asset")
                        .WithMany()
                        .HasForeignKey("AssetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "DisabledDisplay")
                        .WithMany()
                        .HasForeignKey("DisabledDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Display")
                        .WithMany()
                        .HasForeignKey("DisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "EnabledDisplay")
                        .WithMany()
                        .HasForeignKey("EnabledDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Library.Encounters.Entities.Encounter", "Encounter")
                        .WithMany("Effects")
                        .HasForeignKey("EncounterId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "OnTriggerDisplay")
                        .WithMany()
                        .HasForeignKey("OnTriggerDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Common.Entities.Shape", "TriggerShape")
                        .WithMany()
                        .HasForeignKey("TriggerShapeId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "TriggeredDisplay")
                        .WithMany()
                        .HasForeignKey("TriggeredDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Asset");

                    b.Navigation("DisabledDisplay");

                    b.Navigation("Display");

                    b.Navigation("EnabledDisplay");

                    b.Navigation("Encounter");

                    b.Navigation("OnTriggerDisplay");

                    b.Navigation("TriggerShape");

                    b.Navigation("TriggeredDisplay");
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.EncounterObject", b =>
                {
                    b.HasOne("VttTools.Data.Assets.Entities.Asset", "Asset")
                        .WithMany()
                        .HasForeignKey("AssetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "ClosedDisplay")
                        .WithMany()
                        .HasForeignKey("ClosedDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "DestroyedDisplay")
                        .WithMany()
                        .HasForeignKey("DestroyedDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Display")
                        .WithMany()
                        .HasForeignKey("DisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("VttTools.Data.Library.Encounters.Entities.Encounter", "Encounter")
                        .WithMany("Objects")
                        .HasForeignKey("EncounterId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "OpenedDisplay")
                        .WithMany()
                        .HasForeignKey("OpenedDisplayId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Asset");

                    b.Navigation("ClosedDisplay");

                    b.Navigation("DestroyedDisplay");

                    b.Navigation("Display");

                    b.Navigation("Encounter");

                    b.Navigation("OpenedDisplay");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.Stage", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "AlternateBackground")
                        .WithMany()
                        .HasForeignKey("AlternateBackgroundId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "AmbientSound")
                        .WithMany()
                        .HasForeignKey("AmbientSoundId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("VttTools.Data.Media.Entities.Resource", "MainBackground")
                        .WithMany()
                        .HasForeignKey("MainBackgroundId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("AlternateBackground");

                    b.Navigation("AmbientSound");

                    b.Navigation("MainBackground");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageElement", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Display")
                        .WithMany()
                        .HasForeignKey("DisplayId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Library.Stages.Entities.Stage", "Stage")
                        .WithMany("Elements")
                        .HasForeignKey("StageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Display");

                    b.Navigation("Stage");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageLight", b =>
                {
                    b.HasOne("VttTools.Data.Library.Stages.Entities.Stage", "Stage")
                        .WithMany("Lights")
                        .HasForeignKey("StageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Stage");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageRegion", b =>
                {
                    b.HasOne("VttTools.Data.Library.Stages.Entities.Stage", "Stage")
                        .WithMany("Regions")
                        .HasForeignKey("StageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Stage");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageRegionVertex", b =>
                {
                    b.HasOne("VttTools.Data.Library.Stages.Entities.StageRegion", "Region")
                        .WithMany("Vertices")
                        .HasForeignKey("StageId", "RegionIndex")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Region");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageSound", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Media")
                        .WithMany()
                        .HasForeignKey("MediaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("VttTools.Data.Library.Stages.Entities.Stage", "Stage")
                        .WithMany("Sounds")
                        .HasForeignKey("StageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Media");

                    b.Navigation("Stage");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageWall", b =>
                {
                    b.HasOne("VttTools.Data.Library.Stages.Entities.Stage", "Stage")
                        .WithMany("Walls")
                        .HasForeignKey("StageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Stage");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageWallSegment", b =>
                {
                    b.HasOne("VttTools.Data.Library.Stages.Entities.StageWall", "Wall")
                        .WithMany("Segments")
                        .HasForeignKey("StageId", "WallIndex")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Wall");
                });

            modelBuilder.Entity("VttTools.Data.Library.Worlds.Entities.World", b =>
                {
                    b.HasOne("VttTools.Data.Media.Entities.Resource", "Background")
                        .WithMany()
                        .HasForeignKey("BackgroundId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Background");
                });

            modelBuilder.Entity("VttTools.Data.Media.Entities.Resource", b =>
                {
                    b.OwnsOne("VttTools.Common.Model.Size", "Dimensions", b1 =>
                        {
                            b1.Property<Guid>("ResourceId")
                                .HasColumnType("uuid");

                            b1.Property<int>("Height")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer")
                                .HasDefaultValue(0)
                                .HasColumnName("Height");

                            b1.Property<int>("Width")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer")
                                .HasDefaultValue(0)
                                .HasColumnName("Width");

                            b1.HasKey("ResourceId");

                            b1.ToTable("Resources");

                            b1.WithOwner()
                                .HasForeignKey("ResourceId");
                        });

                    b.Navigation("Dimensions")
                        .IsRequired();
                });

            modelBuilder.Entity("VttTools.Data.AI.Entities.Provider", b =>
                {
                    b.Navigation("Models");
                });

            modelBuilder.Entity("VttTools.Data.Assets.Entities.Asset", b =>
                {
                    b.Navigation("StatBlockEntries");

                    b.Navigation("Tokens");
                });

            modelBuilder.Entity("VttTools.Data.Common.Entities.Shape", b =>
                {
                    b.Navigation("Vertices");
                });

            modelBuilder.Entity("VttTools.Data.Jobs.Entities.Job", b =>
                {
                    b.Navigation("Items");
                });

            modelBuilder.Entity("VttTools.Data.Library.Adventures.Entities.Adventure", b =>
                {
                    b.Navigation("Encounters");
                });

            modelBuilder.Entity("VttTools.Data.Library.Campaigns.Entities.Campaign", b =>
                {
                    b.Navigation("Adventures");
                });

            modelBuilder.Entity("VttTools.Data.Library.Encounters.Entities.Encounter", b =>
                {
                    b.Navigation("Actors");

                    b.Navigation("Effects");

                    b.Navigation("Objects");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.Stage", b =>
                {
                    b.Navigation("Elements");

                    b.Navigation("Lights");

                    b.Navigation("Regions");

                    b.Navigation("Sounds");

                    b.Navigation("Walls");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageRegion", b =>
                {
                    b.Navigation("Vertices");
                });

            modelBuilder.Entity("VttTools.Data.Library.Stages.Entities.StageWall", b =>
                {
                    b.Navigation("Segments");
                });

            modelBuilder.Entity("VttTools.Data.Library.Worlds.Entities.World", b =>
                {
                    b.Navigation("Adventures");

                    b.Navigation("Campaigns");
                });
#pragma warning restore 612, 618
        }
    }
}
